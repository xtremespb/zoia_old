"use strict";!function(){var i=void 0;$(document).ready(function(){var a=$("#zp_locale").attr("data"),n=JSON.parse($("#zp_langs").attr("data")),t="true"===$("#zp_maintenanceEnabled").attr("data");$.getScript("/api/lang/dashboard/"+a+".js").done(function(){i=$zUI.modal("#zoiaRestartProgressDialog",{bgClose:!1,escClose:!1}),$("#zoia_dashboard_restart").click(function(){$zUI.modal.confirm(lang["System will be restarted. Are you sure you wish to continue?"],{labels:{ok:lang.Yes,cancel:lang.Cancel}}).then(function(){$("#zoiaSpinnerMain").show(),$.ajax({type:"GET",url:"/api/dashboard/restart",cache:!1}).done(function(a){$("#zoiaSpinnerMain").hide(),a&&1===a.status?(i.show(),setTimeout(function(){location.href="?_="+Date.now()},3e4)):$zUI.notification(lang["Could not restart Zoia"],{status:"danger",timeout:1500})}).fail(function(){$("#zoiaSpinnerMain").hide(),$zUI.notification(lang["Could not restart Zoia"],{status:"danger",timeout:1500})},200)})}),$("#zoia_settings").submit(function(a){a.preventDefault();var t={protocol:$("#zoia_settings_protocol").val(),title:{},titleShort:{},url:{},email:{noreply:$("#zoia_settings_email_noreply").val().trim(),feedback:$("#zoia_settings_email_feedback").val().trim()}};for(var i in n)t.title[n[i]]=$('.zoia-settings-title[data="'+n[i]+'"]').val().trim(),t.titleShort[n[i]]=$('.zoia-settings-title-short[data="'+n[i]+'"]').val().trim(),t.url[n[i]]=$('.zoia-settings-url[data="'+n[i]+'"]').val().trim();$("#zoiaSpinnerMain").show(),$.ajax({type:"POST",url:"/api/dashboard/settings/save",data:{config:t},cache:!1}).done(function(a){$("#zoiaSpinnerMain").hide(),a&&1===a.status?$zUI.notification(lang["Settings are saved"],{status:"success",timeout:1500}):$zUI.notification(lang["Could not save settings"],{status:"danger",timeout:1500})}).fail(function(){$("#zoiaSpinnerMain").hide(),$zUI.notification(lang["Could not save settings"],{status:"danger",timeout:1500})},200)}),t&&$("#zoia_maintenance_on").click(),$(".zoia-maintenance").click(function(){if($(this).hasClass("za-active"))return!1;$("#zoiaSpinnerMain").show(),$.ajax({type:"POST",url:"/api/dashboard/settings/maintenance",data:{enabled:!$("#zoia_maintenance_on").hasClass("za-active")},cache:!1}).done(function(a){$("#zoiaSpinnerMain").hide(),a&&1===a.status?$zUI.notification(lang["Settings are saved"],{status:"success",timeout:1500}):$zUI.notification(lang["Could not save settings"],{status:"danger",timeout:1500})}).fail(function(){$("#zoiaSpinnerMain").hide(),$zUI.notification(lang["Could not save settings"],{status:"danger",timeout:1500})},200)}),$(".zoia-admin-loading").hide(),$("#zoia_admin_panel_wrap").show()})})}();