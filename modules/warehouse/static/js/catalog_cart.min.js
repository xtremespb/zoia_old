"use strict";!function(){var n=void 0,c=void 0,a=void 0,t=function(){$("#za_catalog_cart_table_spinner").width($("#za_catalog_cart_table").width()).height($("#za_catalog_cart_table").height())};$(document).ready(function(){n=$("#zp_currencyPosition").attr("data"),c=JSON.parse($("#zp_settings").attr("data")),a=$("#zp_locale").attr("data"),$.getScript("/api/lang/warehouse/"+a+".js").done(function(){var e,r,o;t(),$(".za-catalog-cart-count").keyup((e=function(){var e=$(this).val().trim();if($(this).removeClass("za-form-danger"),!e.match(/^[0-9]+$/)||5<e.length)return $(this).addClass("za-form-danger");var r=this;e!==$(r).attr("data-prev")&&($(r).attr("data-prev",e),t(),$("#za_catalog_cart_table_spinner").show(),$.ajax({type:"POST",url:"/api/warehouse/cart/count",data:{id:$(r).attr("data"),variant:$(r).attr("data-variant"),count:e},cache:!1}).done(function(a){if(setTimeout(function(){$("#za_catalog_cart_table_spinner").hide()},300),1!==a.status)$(r).addClass("za-form-danger");else{a.count!==e&&$(r).val(a.count),$('.za-catalog-cart-subtotal[data="'+a.id+'"][data-variant="'+a.variant+'"]').html("right"===n?a.subtotal+"&nbsp;"+c.currency:c.currency+a.subtotal).attr("data-val",a.subtotal);var t=0;$(".za-catalog-cart-subtotal").each(function(){t+=parseFloat($(this).attr("data-val"))}),$(".za-catalog-cart-total").html("right"===n?parseFloat(t).toFixed(2)+"&nbsp;"+c.currency:c.currency+parseFloat(t).toFixed(2))}}).fail(function(){setTimeout(function(){$("#za_catalog_cart_table_spinner").hide()},300),$(r).addClass("za-form-danger")}))},r=250,o=null,function(){var a=this,t=arguments;clearTimeout(o),o=setTimeout(function(){e.apply(a,t)},r)})),$(".za-catalog-cart-btn-del").click(function(){var e=this;$("#za_catalog_cart_table_spinner").show(),$.ajax({type:"POST",url:"/api/warehouse/cart/delete",data:{id:$(e).attr("data"),variant:$(e).attr("data-variant")},cache:!1}).done(function(a){if(setTimeout(function(){$("#za_catalog_cart_table_spinner").hide()},300),1===a.status){$(e).parent().parent().remove(),0===$("#za_catalog_cart_table>tbody").children().length&&($("#za_catalog_cart_wrap").hide(),$("#za_catalog_cart_empty").show());var t=0;$(".za-catalog-cart-subtotal").each(function(){t+=parseFloat($(this).attr("data-val"))}),$(".za-catalog-cart-total").html("right"===n?parseFloat(t).toFixed(2)+"&nbsp;"+c.currency:c.currency+parseFloat(t).toFixed(2))}else $zUI.notification(lang["Could not delete item from your cart"],{status:"danger",timeout:1e3})}).fail(function(){setTimeout(function(){$("#za_catalog_cart_table_spinner").hide()},300),$zUI.notification(lang["Could not delete item from your cart"],{status:"danger",timeout:1e3})})})})})}();