"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e={load:{url:"#",method:"POST"},save:{url:"#",method:"POST"},captcha:"/api/captcha",items:[],edit:!1,validation:!0,html:{helpText:'<div class="uk-text-meta">{text}</div>',text:'<div class="uk-margin-bottom"><label class="uk-form-label" for="{prefix}_{name}">{label}:{bullet}</label><br><div class="uk-form-controls"><input class="uk-input {prefix}-form-field{css}" id="{prefix}_{name}" type="{type}" placeholder=""{autofocus}><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="uk-label-danger"></span></div>{helpText}</div></div>',select:'<div class="uk-margin-bottom"><label class="uk-form-label" for="{prefix}_{name}">{label}:{bullet}</label><br><select{multiple} class="uk-select {prefix}-form-field{css}" id="{prefix}_{name}"{autofocus}>{values}</select><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="uk-label-danger"></span></div>{helpText}</div>',passwordConfirm:'<div class="uk-margin"><label class="uk-form-label" for="{prefix}_{name}">{label}:{bullet}</label><div class="uk-flex"><div class="{prefix}-field-wrap"><input class="uk-input {prefix}-form-field" id="{prefix}_{name}" type="password" placeholder=""{autofocus}></div><div><input class="uk-input {prefix}-form-field" id="{prefix}_{name}Confirm" type="password" placeholder=""></div></div><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="uk-label-danger"></span></div>{helpText}</div>',captcha:'<div class="uk-margin"><label class="uk-form-label" for="{prefix}_{name}">{label}:{bullet}</label><div class="uk-grid uk-grid-small"><div><input class="uk-input {prefix}-form-field {prefix}-captcha-field{css}" type="text" placeholder="" id="{prefix}_{name}"{autofocus}></div><div><div class="uk-form-controls"><img class="{prefix}-captcha-img"></div></div></div><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="uk-label-danger"></span></div>{helpText}',buttonsWrap:'<div class="{css}">{buttons}{html}</div>',button:'<button class="uk-button {prefix}-form-button{css}" id="{prefix}_{name}" type="{type}">{label}</button>',launcher:'<div class="uk-margin"><label class="uk-form-label" for="{prefix}_{name}_btn">{label}:{bullet}</label><div class="uk-flex"><div id="{prefix}_{name}_val" class="{prefix}-{name}-selector" data="{data}">{value}</div><div><button class="uk-button uk-button-default" id="{prefix}_{name}_btn" type="button">{labelBtn}</button></div></div>{helpText}{html}</div>',textarea:'<div class="uk-margin-bottom"><label class="uk-form-label" for="{prefix}_{name}">{label}:{bullet}</label><br><div class="uk-form-controls"><textarea class="uk-textarea {prefix}-form-field{css}" id="{prefix}_{name}"{autofocus}></textarea><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="uk-label-danger"></span></div>{helpText}</div></div>',checkboxlistItem:'<li><label><input class="uk-checkbox {prefix}-{name}-cbx" type="checkbox" data="{title}">&nbsp;&nbsp;{title}</label></li>',checkboxlist:'<div class="uk-margin-bottom"><label class="uk-form-label" for="{prefix}_{name}">{label}:{bullet}</label><div class="uk-panel uk-panel-scrollable{css}" id="{prefix}_{name}_wrap"><ul class="uk-list">{items}</ul></div>{helpText}</div>',valueslistItem:'<div class="uk-flex uk-margin-top {prefix}-{name}-item"><div class="uk-margin-right"><input placeholder="{langParameter}" type="text" class="uk-input formBuilder-valueslist-par" value="{key}"></div><div class="uk-margin-right"><input placeholder="{langValue}" type="text" class="uk-input formBuilder-valueslist-val" value="{value}"></div><div style="padding-top:3px"><button class="uk-icon-button uk-button-danger formBuilder-valueslist-btnDel" uk-icon="icon:minus"></button></div></div>',valueslistItemFixed:'<div class="uk-flex uk-margin-top {prefix}-{name}-item"><div class="uk-margin-right">{key}</div><div class="uk-margin-right"><input placeholder="{langValue}" type="text" class="uk-input formBuilder-valueslist-val" value="{value}"></div></div>',valueslist:'<div class="uk-flex uk-flex-column"><div class="uk-margin-bottom"><label class="uk-form-label">{label}:{bullet}</label></div><div><button type="button" class="uk-icon-button uk-button-primary formBuilder-valueslist-btnAdd" id="{prefix}_{name}_btnAdd" uk-icon="icon:plus" data-prefix="{prefix}" data-name="{name}"></button></div><div id="{prefix}_{name}_wrap" class="uk-margin-bottom {prefix}-formBuilder-valueslist-wrap">{items}</div></div>',bullet:'&nbsp;<span style="color:red;font-size:120%">&#8226;</span>'},template:{fields:"{fields}",buttons:"{buttons}"},lang:{mandatoryMissing:"Should not be empty",tooShort:"Too short",tooLong:"Too long",invalidFormat:"Doesn't match required format",passwordsNotMatch:"Passwords do not match",parameter:"Parameter",value:"Value"},events:{onInit:function(){},onSaveSubmit:function(){},onSaveValidate:function(){},onSaveSuccess:function(){},onSaveError:function(){},onLoadStart:function(){},onLoadSuccess:function(){},onLoadError:function(){}},formDangerClass:"uk-form-danger"},a=function(a,i){this.element=a,this.settings=t.extend({},e,i),this._defaults=e,this._name="zoiaFormBuilder",this._prefix=this.element.id,this._formTypes=["text","email","password","select","passwordConfirm","captcha","launcher","textarea","checkboxlist","valueslist","valueslistfixed","valueslisteditable"],this._saving=!1,this.init()};t.extend(a.prototype,{init:function(){var e="",a="";for(var i in this.settings.items){var s=this.settings.items[i],l="";switch((s.validation&&!this.settings.edit&&s.validation.mandatoryCreate||s.validation&&this.settings.edit&&s.validation.mandatoryEdit)&&(l=this.settings.html.bullet),s.type){case"text":case"email":case"password":e+=this._template(this.settings.html.text,{prefix:this._prefix,name:i,label:s.label,bullet:l,css:s.css?" "+s.css:"",autofocus:s.autofocus?"autofocus":"",helpText:s.helpText?this._template(this.settings.html.helpText,{text:s.helpText,prefix:this._prefix}):"",type:s.type});break;case"launcher":e+=this._template(this.settings.html.launcher,{prefix:this._prefix,name:i,label:s.label,bullet:l,labelBtn:s.labelBtn,data:s.data,value:s.value,css:s.css?" "+s.css:"",helpText:s.helpText?this._template(this.settings.html.helpText,{text:s.helpText,prefix:this._prefix}):"",html:s.html?" "+s.html:""});break;case"valueslist":var n="";for(var r in s.values)n+=this._template(this.settings.html.valueslistItem,{prefix:this._prefix,name:i,key:s.values[r].p,value:s.values[r].v,langParameter:this.settings.lang.parameter,langValue:this.settings.lang.value});e+=this._template(this.settings.html.valueslist,{prefix:this._prefix,name:i,label:s.label,bullet:l,items:n});break;case"valueslisteditable":var o="";for(var c in s.values)o+=this._template(s.values[c].t?this.settings.html.valueslistItemEditablePostfix:this.settings.html.valueslistItemEditable,{prefix:this._prefix,name:i,key:s.values[c].p,value:s.values[c].v,postfix:s.values[c].t,langParameter:this.settings.lang.parameter,langValue:this.settings.lang.value});e+=this._template(this.settings.html.valueslistEditable,{prefix:this._prefix,name:i,label:s.label,bullet:l,items:o,helpText:s.helpText?this._template(this.settings.html.helpText,{text:s.helpText,prefix:this._prefix}):"",buttons:s.buttons||""});break;case"valueslistfixed":var u="";for(var d in s.values)u+=this._template(this.settings.html.valueslistItemFixed,{prefix:this._prefix,name:i,key:s.values[d].p,value:s.values[d].t,data:s.values[d].v,langParameter:this.settings.lang.parameter,langValue:this.settings.lang.value});e+=this._template(this.settings.html.valueslistFixed,{prefix:this._prefix,name:i,label:s.label,bullet:l,items:u});break;case"select":var p="";for(var f in s.values)p+='<option value="'+f+'">'+s.values[f]+"</option>";e+=this._template(this.settings.html.select,{prefix:this._prefix,name:i,label:s.label,bullet:l,css:s.css?" "+s.css:"",multiple:s.multiple?" multiple":"",autofocus:s.autofocus?"autofocus":"",helpText:s.helpText?this._template(this.settings.html.helpText,{text:s.helpText,prefix:this._prefix}):"",type:s.type,values:p});break;case"checkboxlist":var m="";for(var v in s.values)m+=this._template(this.settings.html.checkboxlistItem,{prefix:this._prefix,name:i,title:s.values[v]});e+=this._template(this.settings.html.checkboxlist,{prefix:this._prefix,name:i,label:s.label,bullet:l,css:s.css?" "+s.css:"",multiple:s.multiple?" multiple":"",helpText:s.helpText?this._template(this.settings.html.helpText,{text:s.helpText,prefix:this._prefix}):"",items:m});break;case"passwordConfirm":e+=this._template(this.settings.html.passwordConfirm,{prefix:this._prefix,name:i,label:s.label,bullet:l,css:s.css?" "+s.css:"",autofocus:s.autofocus?"autofocus":"",helpText:s.helpText?this._template(this.settings.html.helpText,{text:s.helpText,prefix:this._prefix}):"",type:"password"});break;case"captcha":e+=this._template(this.settings.html.captcha,{prefix:this._prefix,name:i,css:s.css?" "+s.css:"",label:s.label,bullet:l,helpText:s.helpText?this._template(this.settings.html.helpText,{text:s.helpText,prefix:this._prefix}):"",autofocus:s.autofocus?"autofocus":""});break;case"textarea":e+=this._template(this.settings.html.textarea,{prefix:this._prefix,name:i,label:s.label,bullet:l,css:s.css?" "+s.css:"",autofocus:s.autofocus?"autofocus":"",helpText:s.helpText?this._template(this.settings.html.helpText,{text:s.helpText,prefix:this._prefix}):""});break;case"buttons":for(var h="",b=0;b<s.buttons.length;b++){var x=s.buttons[b];h+=this._template(this.settings.html.button,{css:x.css?" "+x.css:"",prefix:this._prefix,name:x.name||"button"+b,type:x.type||"button",label:x.label||""})+"&nbsp;"}a+=this._template(this.settings.html.buttonsWrap,{prefix:this._prefix,css:s.css?" "+s.css:"",buttons:h,html:s.html?" "+s.html:""})}}t(this.element).html(this._template(this.settings.template.fields,{fields:e})+this._template(this.settings.template.buttons,{buttons:a})),t(".formBuilder-valueslist-btnAdd").unbind(),t(".formBuilder-valueslist-btnAdd").click(function(e){g._valueslistAddFunc(t(this).attr("data-prefix"),t(this).attr("data-name"),"","")}),t(".formBuilder-valueslist-btnDel").unbind(),t(".formBuilder-valueslist-btnDel").click(function(e){t(this).parent().parent().remove()}),t(".formBuilder-valueslistfixed-btnAdd").unbind(),t(".formBuilder-valueslistfixed-btnAdd").click(function(e){g._valueslistfixedAddFunc(t(this).attr("data-prefix"),t(this).attr("data-name"),"","")}),t(".formBuilder-valueslistfixed-btnDel").unbind(),t(".formBuilder-valueslistfixed-btnDel").click(function(e){t(this).parent().parent().remove()}),t(".formBuilder-valueslisteditable-btnAdd").unbind(),t(".formBuilder-valueslisteditable-btnAdd").click(function(e){g._valueslistAddFunc(t(this).attr("data-prefix"),t(this).attr("data-name"),"","")}),t(".formBuilder-valueslisteditable-btnDel").unbind(),t(".formBuilder-valueslisteditable-btnDel").click(function(e){t(this).parent().parent().remove()}),this.settings.events.onInit&&this.settings.events.onInit();var g=this;t(this.element).submit(function(t){t.preventDefault(),g._submit()}),this._captchaInit()},_valueslistAddFunc:function(e,a,i,s,l){var n=this._template(this.settings.html.valueslistItem,{prefix:e,name:a,key:i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),value:s,langParameter:this.settings.lang.parameter,langValue:this.settings.lang.value});t("#"+e+"_"+a+"_wrap").append(n),l||t("."+e+"-"+a+"-item").last().find("div>input:first").focus(),t(".formBuilder-valueslist-btnDel").unbind(),t(".formBuilder-valueslist-btnDel").click(function(e){e.stopPropagation(),t(this).parent().parent().remove()})},_valueslisteditableAddFunc:function(e,a,i,s,l,n,r){if(n="undefined"===n?null:n,i){i=String(i);var o=this._template(n?this.settings.html.valueslistItemEditablePostfix:this.settings.html.valueslistItemEditable,{prefix:e,name:a,key:i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),value:s,data:l,postfix:n,langParameter:this.settings.lang.parameter,langValue:this.settings.lang.value});t("#"+e+"_"+a+"_wrap").append(o),r||t("."+e+"-"+a+"-item").last().find("div>input:first").focus(),t(".formBuilder-valueslisteditable-btnDel").unbind(),t(".formBuilder-valueslisteditable-btnDel").click(function(e){e.stopPropagation(),t(this).parent().parent().remove()})}},_valueslistfixedAddFunc:function(e,a,i,s,l){var n=this._template(this.settings.html.valueslistfixedItem,{prefix:e,name:a,key:i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),value:s,langParameter:this.settings.lang.parameter,langValue:this.settings.lang.value});t("#"+e+"_"+a+"_wrap").append(n),l||t("."+e+"-"+a+"-item").last().find("div>input:first").focus(),t(".formBuilder-valueslistfixed-btnDel").unbind(),t(".formBuilder-valueslistfixed-btnDel").click(function(e){e.stopPropagation(),t(this).parent().parent().remove()})},setValidation:function(t){this.validation=t},setEditMode:function(t){this.settings.edit=t},clearErrors:function(){t("."+this._prefix+"-form-field").removeClass(this.settings.formDangerClass),t("."+this._prefix+"-error-text").hide()},resetForm:function(){this.clearErrors();t("."+this._prefix+"-form-field").not(".zoiaFormBuilder-no-reset").val(""),t("select."+this._prefix+"-form-field").prop("selectedIndex",0),t(".formBuilder-valueslist-val").val(""),t("."+this._prefix+"-formBuilder-valueslist-wrap").html("");for(var e in this.settings.items){var a=this.settings.items[e];a.default&&t("#"+this._prefix+"_"+e).val(a.default),"launcher"===a.type&&(t("#"+this._prefix+"_"+e+"_val").html(a.value),t("#"+this._prefix+"_"+e+"_val").attr("data",a.data)),"checkboxlist"===a.type&&t("."+this._prefix+"-"+e+"-cbx").prop("checked",!1)}},serialize:function(){var e=this,a={};for(var i in this.settings.items){var s=this.settings.items[i];-1!==this._formTypes.indexOf(s.type)&&function(){switch(s.type){case"launcher":a[i]={type:s.type,value:t("#"+e._prefix+"_"+i+"_val").html(),id:t("#"+e._prefix+"_"+i+"_val").attr("data")};break;case"checkboxlist":var l=t("."+e._prefix+"-"+i+"-cbx:checked").map(function(){return t(this).attr("data")}).get();a[i]={type:s.type,value:l.join(",")};break;case"valueslist":var n=[];t("."+e._prefix+"-"+i+"-item").each(function(){n.push({p:String(t(this).find("*>.formBuilder-valueslist-par").val()),v:String(t(this).find("*>.formBuilder-valueslist-val").val())})}),a[i]={type:s.type,value:n};break;case"valueslisteditable":var r=[];t("."+e._prefix+"-"+i+"-item").each(function(){r.push({p:String(t(this).find("*>.formBuilder-valueslist-par").html()),v:String(t(this).find("*>.formBuilder-valueslist-val").val()),d:String(t(this).find("*>.formBuilder-valueslist-val").attr("data")),t:String(t(this).find("*>.formBuilder-valueslist-val").attr("data-postfix"))})}),a[i]={type:s.type,value:r};break;case"valueslistfixed":var o=[];t("."+e._prefix+"-"+i+"-item").each(function(){o.push({p:String(t(this).find("*>.formBuilder-valueslist-val").attr("data")),v:String(t(this).find("*>.formBuilder-valueslist-val").val())})}),a[i]={type:s.type,value:o};break;default:a[i]={type:s.type,value:t("#"+e._prefix+"_"+i).val()}}}()}return a},deserialize:function(e){if(e&&"object"===(void 0===e?"undefined":_typeof(e)))for(var a in this.settings.items)switch(e[a]||(e[a]={id:"",value:""}),e[a].type){case"launcher":t("#"+this._prefix+"_"+a+"_val").html(e[a].value),t("#"+this._prefix+"_"+a+"_val").attr("data",e[a].id);break;case"checkboxlist":var i=e[a].value.split(",");for(var s in i)t('.editForm-groups-cbx[data="'+i[s]+'"]').prop("checked",!0);break;case"valueslist":var l=[];for(var n in e[a].value)l.push(e[a].value[n].p),l.push(e[a].value[n].v);for(t("#"+this._prefix+"_"+a+"_wrap").html("");l.length>0;){var r=l.shift(),o=l.shift();this._valueslistAddFunc(this._prefix,a,r,o,!0)}break;case"valueslisteditable":var c=[];for(var u in e[a].value)c.push(e[a].value[u].p),c.push(e[a].value[u].v),c.push(e[a].value[u].d),c.push(e[a].value[u].t);for(t("#"+this._prefix+"_"+a+"_wrap").html("");c.length>0;){var d=c.shift(),p=c.shift(),f=c.shift(),m=c.shift();this._valueslisteditableAddFunc(this._prefix,a,d,p,f,m,!0)}break;case"valueslistfixed":t("."+this._prefix+"-"+a+"-item-val").val("");for(var v in e[a].value)t("."+this._prefix+"-"+a+'-item-val[data="'+e[a].value[v].p+'"]').val(e[a].value[v].v);break;default:t("#"+this._prefix+"_"+a).val(e[a].value||"")}},deserializePart:function(e,a){if(a&&"object"===(void 0===a?"undefined":_typeof(a)))switch(a||(a={id:"",value:""}),a.type){case"launcher":t("#"+this._prefix+"_"+e+"_val").html(a.value),t("#"+this._prefix+"_"+e+"_val").attr("data",a.id);break;case"checkboxlist":var i=a.value.split(",");for(var s in i)t('.editForm-groups-cbx[data="'+i[s]+'"]').prop("checked",!0);break;case"valueslist":var l=[];for(var n in a.value)l.push(a.value[n].p),l.push(a.value[n].v);for(t("#"+this._prefix+"_"+e+"_wrap").html("");l.length>0;){var r=l.shift(),o=l.shift();this._valueslistAddFunc(this._prefix,e,r,o,!0)}break;case"valueslisteditable":var c=[];for(var u in a.value)c.push(a.value[u].p),c.push(a.value[u].v),c.push(a.value[u].d),c.push(a.value[u].t);for(t("#"+this._prefix+"_"+e+"_wrap").html("");c.length>0;){var d=c.shift(),p=c.shift(),f=c.shift(),m=c.shift();this._valueslisteditableAddFunc(this._prefix,e,d,p,f,m,!0)}break;case"valueslistfixed":t("."+this._prefix+"-"+e+"-item-val").val("");for(var v in a.value)t("."+this._prefix+"-"+e+'-item-val[data="'+a.value[v].p+'"]').val(a.value[v].v);break;default:t("#"+this._prefix+"_"+e).val(a.value||"")}},loadJSON:function(e){var a=this,i=this;jQuery.each(e,function(e,s){if(t("#"+i._prefix+"_"+e).val(s),i.settings.items[e]&&"checkboxlist"===i.settings.items[e].type&&s){var l=s.split(",");for(var n in l)t('.editForm-groups-cbx[data="'+l[n]+'"]').prop("checked",!0)}if(i.settings.items[e]&&"valueslist"===i.settings.items[e].type&&s){var r=[];for(var o in s)r.push(o),r.push(s[o]);t("#"+i._prefix+"_"+e+"_wrap").html("");for(var c in s)i._valueslistAddFunc(i._prefix,e,r.shift(),r.shift())}if(i.settings.items[e]&&"valueslisteditable"===i.settings.items[e].type&&s){var u=[];for(var d in s)u.push(d),u.push(s[d]);t("#"+i._prefix+"_"+e+"_wrap").html("");for(var p in s)i._valueslisteditableAddFunc(i._prefix,e,u.shift(),u.shift(),u.shift(),u.shift())}if(i.settings.items[e]&&"valueslistfixed"===i.settings.items[e].type&&s){t("."+a._prefix+"-"+e+"-item-val").val("");for(var f in s)t("."+a._prefix+"-"+e+'-item-val[data="'+s[f].p+'"]').val(s[f].v)}})},loadData:function(e){var a=this;this.settings.events.onLoadStart&&this.settings.events.onLoadStart(),this.resetForm();var i=this;t.ajax({type:this.settings.load.method,url:this.settings.load.url,data:e,cache:!1}).done(function(e){e&&1===e.status?(jQuery.each(e.item,function(e,s){if(t("#"+i._prefix+"_"+e).val(s),i.settings.items[e]&&"checkboxlist"===i.settings.items[e].type&&s){var l=s.split(",");for(var n in l)t('.editForm-groups-cbx[data="'+l[n]+'"]').prop("checked",!0)}if(i.settings.items[e]&&"valueslist"===i.settings.items[e].type&&s){var r=[];for(var o in s)r.push(o),r.push(s[o]);t("#"+i._prefix+"_"+e+"_wrap").html("");for(var c in s)i._valueslistAddFunc(i._prefix,e,r.shift(),r.shift())}if(i.settings.items[e]&&"valueslisteditable"===i.settings.items[e].type&&s){var u=[];for(var d in s)u.push(d),u.push(s[d]);t("#"+i._prefix+"_"+e+"_wrap").html("");for(var p in s)i._valueslisteditableAddFunc(i._prefix,e,u.shift(),u.shift(),u.shift())}if(i.settings.items[e]&&"valueslistfixed"===i.settings.items[e].type&&s){t("."+a._prefix+"-"+e+"-item-val").val("");for(var f in s)t("."+a._prefix+"-"+e+'-item-val[data="'+s[f].p+'"]').val(s[f].v)}}),i.settings.events.onLoadSuccess&&i.settings.events.onLoadSuccess(e)):i.settings.events.onLoadError&&i.settings.events.onLoadError(e)}).fail(function(t,e){i.settings.events.onLoadError&&i.settings.events.onLoadError(t,e)})},captchaRefresh:function(){t("."+this._prefix+"-captcha-img").show(),t("."+this._prefix+"-captcha-img").attr("src",this.settings.captcha+"?"+(new Date).getTime()),t("."+this._prefix+"-captcha-field").val("")},_captchaInit:function(){this.captchaRefresh();var e=this;t("img."+this._prefix+"-captcha-img").click(function(){e.captchaRefresh()})},_template:function(t,e){for(var a in e)t=t.replace(new RegExp("{"+a+"}","g"),e[a]);return t},validate:function(e){var a=this,i={},s={};for(var l in this.settings.items){var n=this.settings.items[l];if(-1!==this._formTypes.indexOf(n.type))if("launcher"!==n.type){if(("valueslist"!==n.type||"continue"!==function(){if(e&&e[l])return s[l]=e[l].value,"continue";var i=[];return t("."+a._prefix+"-"+l+"-item").each(function(){i.push({p:String(t(this).find("*>.formBuilder-valueslist-par").val()),v:String(t(this).find("*>.formBuilder-valueslist-val").val())})}),s[l]=i,"continue"}())&&!("valueslisteditable"===n.type&&"continue"===function(){if(e&&e[l])return s[l]=e[l].value,"continue";var i=[];return t("."+a._prefix+"-"+l+"-item").each(function(){i.push({p:String(t(this).find("*>.formBuilder-valueslist-par").val()),v:String(t(this).find("*>.formBuilder-valueslist-val").val())})}),s[l]=i,"continue"}()||"valueslistfixed"===n.type&&"continue"===function(){if(e&&e[l])return s[l]=e[l].value,"continue";var i=[];return t("."+a._prefix+"-"+l+"-item").each(function(){i.push({p:String(t(this).find("*>.formBuilder-valueslist-val").attr("data")),v:String(t(this).find("*>.formBuilder-valueslist-val").val())})}),s[l]=i,"continue"}()))if("checkboxlist"!==n.type){var r=e?e[l]?e[l].value:void 0:t("#"+this._prefix+"_"+l).val();if(n.validation){if(!n.validation.mandatoryEdit&&!r&&this.settings.edit||!n.validation.mandatoryCreate&&!r&&!this.settings.edit)continue;if(n.validation.mandatoryCreate&&!r&&!this.settings.edit){i[l]=this.settings.lang.mandatoryMissing;continue}if(n.validation.mandatoryEdit&&!r&&this.settings.edit){i[l]=this.settings.lang.mandatoryMissing;continue}if(n.validation.process&&"function"==typeof n.validation.process&&(r=n.validation.process(r)),"passwordConfirm"===n.type&&t("#"+this._prefix+"_"+l+"Confirm").val()!==r){i[l]=this.settings.lang.passwordsNotMatch;continue}if(n.validation.length){if(n.validation.length.min&&r.length<n.validation.length.min){i[l]=this.settings.lang.tooShort;continue}if(n.validation.length.max&&r.length>n.validation.length.max){i[l]=this.settings.lang.tooLong;continue}}if(n.validation.regexp&&!r.match(n.validation.regexp)){i[l]=this.settings.lang.invalidFormat;continue}s[l]=r}}else{var o=t("."+this._prefix+"-"+l+"-cbx:checked").map(function(){return t(this).attr("data")}).get();s[l]=e?e[l]?e[l].value:void 0:o.join(",")}}else s[l]=e?e[l]?e[l].id:void 0:t("#"+this._prefix+"_"+l+"_val").attr("data")}return{data:s,errors:i}},errors:function(e){if(Object.keys(e).length>0){var a=!1;for(var i in e)t("#"+this._prefix+"_"+i).addClass(this.settings.formDangerClass),t("#"+this._prefix+"_"+i+"_error_text > span").html(e[i]),t("#"+this._prefix+"_"+i+"_error_text").show(),a||(t("#"+this._prefix+"_"+i).focus(),a=!0),"passwordConfirm"===this.settings.items[i].type&&t("#"+this._prefix+"_"+i+"Confirm").addClass(this.settings.formDangerClass);return!0}return!1},_submit:function(){if(!this._saving){this.settings.events.onSaveSubmit&&this.settings.events.onSaveSubmit(),this.clearErrors();var e=this,a={},i={};if(this.settings.validation){var s=this.validate();if(a=s.data||{},i=s.errors||{},this.errors(i))return;if(this.settings.events.onSaveValidate&&"__stop"===(a=this.settings.events.onSaveValidate(a,i)||a))return}else if(this.settings.events.onSaveValidate&&"__stop"===(a=this.settings.events.onSaveValidate(a)))return;e._saving=!0,t.ajax({type:this.settings.save.method,url:this.settings.save.url,data:a,cache:!1}).done(function(a){if(e._saving=!1,a&&1===a.status)e.settings.events.onSaveSuccess&&e.settings.events.onSaveSuccess(a);else{if(a.fields)for(var i in a.fields){var s=!1;t("#"+e._prefix+"_"+a.fields[i]).addClass(e.settings.formDangerClass),s||(t("#"+e._prefix+"_"+a.fields[i]).focus(),s=!0)}e.captchaRefresh(),e.settings.events.onSaveError&&e.settings.events.onSaveError(a)}}).fail(function(t,a){e._saving=!1,e.captchaRefresh(),e.settings.events.onSaveError&&e.settings.events.onSaveError(t,a)})}}}),t.fn.zoiaFormBuilder=function(e){var i=void 0;return this.each(function(){(i=t.data(this,"plugin_zoiaFormBuilder"))||(i=new a(this,e),t.data(this,"plugin_zoiaFormBuilder",i))}),i}}(jQuery,window,document);var accountExtendDialog=void 0,accountCreateDialog=void 0,accountProgressDialog=void 0,accountExtendCost=void 0,accountExtendID=void 0,formBuilderLang={mandatoryMissing:lang["Should not be empty"],tooShort:lang["Too short"],tooLong:lang["Too long"],invalidFormat:lang["Doesn't match required format"],passwordsNotMatch:lang["Passwords do not match"],parameter:lang.Parameter,value:lang.Value},formBuilderHTML={helpText:'<div class="za-text-meta">{text}</div>',text:'<div class="za-margin-bottom"><label class="za-form-label" for="{prefix}_{name}">{label}:</label><br><div class="za-form-controls"><input class="za-input {prefix}-form-field{css}" id="{prefix}_{name}" type="{type}" placeholder=""{autofocus}><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="za-label-danger"></span></div>{helpText}</div></div>',select:'<div class="za-margin-bottom"><label class="za-form-label" for="{prefix}_{name}">{label}:</label><br><select{multiple} class="za-select {prefix}-form-field{css}" id="{prefix}_{name}"{autofocus}>{values}</select><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="za-label-danger"></span></div>{helpText}</div>',passwordConfirm:'<div class="za-margin"><label class="za-form-label" for="{prefix}_{name}">{label}:</label><div class="za-flex"><div class="{prefix}-field-wrap"><input class="za-input {prefix}-form-field" id="{prefix}_{name}" type="password" placeholder=""{autofocus}></div><div><input class="za-input {prefix}-form-field" id="{prefix}_{name}Confirm" type="password" placeholder=""></div></div><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="za-label-danger"></span></div>{helpText}</div>',captcha:'<div class="za-margin"><label class="za-form-label" for="{prefix}_{name}">{label}:</label><div class="za-grid za-grid-small"><div><input class="za-input {prefix}-form-field {prefix}-captcha-field{css}" type="text" placeholder="" id="{prefix}_{name}"{autofocus}></div><div><div class="za-form-controls"><img class="{prefix}-captcha-img"></div></div></div><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="za-label-danger"></span></div>{helpText}',buttonsWrap:'<div class="{css}">{buttons}{html}</div>',button:'<button class="za-button {prefix}-form-button{css}" id="{prefix}_{name}" type="{type}">{label}</button>',launcher:'<div class="za-margin"><label class="za-form-label" for="{prefix}_{name}_btn">{label}:</label><div class="za-flex"><div id="{prefix}_{name}_val" class="{prefix}-{name}-selector" data="{data}">{value}</div><div><button class="za-button za-button-default" id="{prefix}_{name}_btn" type="button">{labelBtn}</button></div></div>{helpText}{html}</div>',textarea:'<div class="za-margin-bottom"><label class="za-form-label" for="{prefix}_{name}">{label}:</label><br><div class="za-form-controls"><textarea class="za-textarea {prefix}-form-field{css}" id="{prefix}_{name}"{autofocus}></textarea><div id="{prefix}_{name}_error_text" class="{prefix}-error-text" style="display:none"><span class="za-label-danger"></span></div>{helpText}</div></div>',checkboxlistItem:'<li><label><input class="za-checkbox {prefix}-{name}-cbx" type="checkbox" data="{title}">&nbsp;&nbsp;{title}</label></li>',checkboxlist:'<div class="za-margin-bottom"><label class="za-form-label" for="{prefix}_{name}">{label}:</label><div class="za-panel za-panel-scrollable{css}" id="{prefix}_{name}_wrap"><ul class="za-list">{items}</ul></div>{helpText}</div>',valueslistItem:'<div class="za-flex za-margin-top {prefix}-{name}-item"><div class="za-margin-right"><input placeholder="{langParameter}" type="text" class="za-input formBuilder-valueslist-par" value="{key}"></div><div class="za-margin-right"><input placeholder="{langValue}" type="text" class="za-input formBuilder-valueslist-val" value="{value}"></div><div style="padding-top:3px"><button class="za-icon-button za-button-danger formBuilder-valueslist-btnDel" za-icon="icon:minus"></button></div></div>',valueslistItemFixed:'<div class="za-flex za-margin-top {prefix}-{name}-item"><div class="za-margin-right" style="margin-top:10px;min-width:100px;font-size:80%">{value}:</div><div class="za-margin-right"><input placeholder="{langValue}" type="text" class="za-input formBuilder-valueslist-val {prefix}-{name}-item-val" value="{data}" data="{key}"></div></div>',valueslistItemEditable:'<div class="za-flex za-width-1-2@l za-width-1-1@m za-card za-card-default za-card-small za-card-body {prefix}-{name}-item"><span class="za-sortable-handle za-margin-small-right" za-icon="icon: table"></span><div class="za-width-1-1"><button type="button" class="selectPropertyItemClose" za-close style="float:right"></button><label class="za-form-label formBuilder-valueslist-par">{key}</label><input placeholder="{langValue}" type="text" class="za-input za-width-1-1 formBuilder-valueslist-val" value="{value}" data="{data}"></div></div>',valueslistItemEditablePostfix:'<div class="za-flex za-width-1-2@l za-width-1-1@m za-card za-card-default za-card-small za-card-body {prefix}-{name}-item"><span class="za-sortable-handle za-margin-small-right" za-icon="icon: table"></span><div class="za-width-1-1"><button type="button" class="selectPropertyItemClose" za-close style="float:right"></button><label class="za-form-label formBuilder-valueslist-par">{key}</label><div><div class="za-inline za-form-width-medium"><span class="za-form-icon za-form-icon-flip">{postfix}</span><input placeholder="{langValue}" type="number" step="0.01" class="za-input za-width-1-1 formBuilder-valueslist-val" value="{value}" data-postfix="{postfix}" data="{data}"></div></div></div></div>',valueslist:'<div class="za-flex za-flex-column"><div class="za-margin-bottom"><label class="za-form-label">{label}:</label></div><div><button type="button" class="za-icon-button za-button-primary formBuilder-valueslist-btnAdd" id="{prefix}_{name}_btnAdd" za-icon="icon:plus" data-prefix="{prefix}" data-name="{name}"></button></div><div id="{prefix}_{name}_wrap" class="za-margin-bottom {prefix}-formBuilder-valueslist-wrap">{items}</div>',valueslistFixed:'<div class="za-flex za-flex-column"><div><label class="za-form-label">{label}:</label></div><div id="{prefix}_{name}_wrap" class="za-margin-bottom formBuilder-valueslist-wrap">{items}</div></div>',valueslistEditable:'<div class="za-flex za-flex-column" id="{prefix}_{name}_widget"><div class="za-margin-bottom"><label class="za-form-label">{label}:</label></div>{buttons}<div id="{prefix}_{name}_wrap" class="za-margin-bottom {prefix}-formBuilder-valueslist-wrap" za-sortable="handle:.za-sortable-handle">{items}</div><div class="za-margin-bottom">{helpText}</div></div>',bullet:'&nbsp;<span style="color:red;font-size:140%">&#8226;</span>'},checkAccountStatus=function t(e){$.ajax({type:"GET",url:"/api/hosting/account/create/status",data:{id:e},cache:!1}).done(function(a){if(a&&1===a.status)if(a.state&&2===a.state){accountProgressDialog.hide(),$(".zoia-accounts-empty-accounts").is(":visible")&&$("#zoia_account_table_body").html(""),$(".zoia-accounts-empty-history").is(":visible")&&$("#zoia_history_table>tbody").html(""),$("#zoia_account_table_body").append('<tr><td class="zoia-accounts-id">'+a.id+'</td><td data="'+a.presetID+'">'+a.preset+"</td><td>"+a.days+'</td><td><a href="" class="za-icon-button zoia-btn-extend" za-icon="plus"></a></td></tr>'),$("#zoia_history_table>tbody").prepend("<tr><td>"+new Date(1e3*parseInt(a.timestamp,10)).toLocaleString()+'</td><td><span za-icon="'+(a.sum<0?"minus":"plus")+'-circle"></span>&nbsp;'+("left"===configModule.currencyPosition?configModule.currency[locale]:"")+Math.abs(a.sum)+("right"===configModule.currencyPosition?"&nbsp;"+configModule.currency[locale]:"")+"</td></tr>");var i=parseFloat($(".zoia-balance").html())-Math.abs(parseFloat(a.sum));$(".zoia-balance").html(i),totalFunds=i,$(".zoia-btn-extend").unbind().click(btnExtendClickHandler),$zUI.modal.alert(lang["Your account has been created successfully and is ready to use."],{labels:{ok:lang.OK},stack:!0})}else setTimeout(function(){t(e)},3e3);else accountProgressDialog.hide(),$zUI.modal.alert(lang["Unable to create new account"],{labels:{ok:lang.OK},stack:!0})}).fail(function(){accountProgressDialog.hide(),$zUI.modal.alert(lang["Unable to create new account"],{labels:{ok:lang.OK},stack:!0})},200)},btnExtendClickHandler=function(t){t.preventDefault(),accountExtendCost=parseFloat(prices[$(this).parent().parent().find("td:eq(1)").attr("data")]),accountExtendID=$(this).parent().parent().find("td:eq(0)").html(),calculateExtendTotal(),$("#zoiaAccountExtendForm").zoiaFormBuilder().resetForm(),accountExtendDialog.show()},captchaRefresh=function(){$(".topup-captcha-img").attr("src","/api/captcha?rnd="+Math.random()),$("#topup_captcha").val(""),$(".topup-captcha-img").show()},topupHandler=function(t){if(t.preventDefault(),!$("#zoia_spinner_topup").is(":visible")){$(".zoia-topup-field").removeClass("za-form-danger");var e=$("#topup_sum").val().trim(),a=$("#topup_captcha").val().trim();if(!e||!e.match(/^\d+(\.\d+)?$/))return $("#topup_sum").addClass("za-form-danger");if(!a||!a.match(/^[0-9]{4}$/))return $("#topup_captcha").addClass("za-form-danger");$("#zoia_spinner_topup").show(),$("#zoia_btn_topup").hide(),$.ajax({type:"POST",url:"/hosting/payment/request",data:{sum:e,captcha:a},cache:!1}).done(function(t){t&&1===t.status&&t.url?location.href=t.url:($("#zoia_spinner_topup").hide(),$("#zoia_btn_topup").show(),captchaRefresh(),$("#topup_captcha").val(""),t.error?$zUI.modal.alert(t.error,{labels:{ok:lang.OK},stack:!0}):$zUI.modal.alert(lang["Unable to create top-up request. Please try again later."],{labels:{ok:lang.OK},stack:!0}))}).fail(function(){$("#zoia_spinner_topup").hide(),$("#zoia_btn_topup").show(),captchaRefresh(),$zUI.modal.alert(lang["Unable to create top-up request. Please try again later."],{labels:{ok:lang.OK},stack:!0})},200)}},accountCreateFormData={template:{fields:'<div class="za-modal-body">{fields}</div>',buttons:"{buttons}"},formDangerClass:"za-form-danger",html:formBuilderHTML,events:{onSaveValidate:function(t){return/[A-Z]/.test(t.password)+/[a-z]/.test(t.password)+/\d/.test(t.password)+/\W/.test(t.password)<3?($zUI.modal.alert(lang["Password is too weak. Please use both lowercase and uppercase characters, numbers and special characters. Minimal length: 8"],{labels:{ok:lang.OK},stack:!0}),$("#zoiaAccountForm_password").addClass("za-form-danger"),$("#zoiaAccountForm_passwordConfirm").addClass("za-form-danger"),"__stop"):($("#zoiaAccountCreateSpinner").show(),$(".zoiaAccountForm-form-button").hide(),t)},onSaveSuccess:function(t){$("#zoiaAccountCreateSpinner").hide(),$(".zoiaAccountForm-form-button").show(),t&&t.status&&1===t.status&&t.taskID?(accountCreateDialog.hide(),accountProgressDialog.show(),checkAccountStatus(t.taskID)):$zUI.modal.alert(lang["Unable to create new account"],{labels:{ok:lang.OK},stack:!0})},onSaveError:function(t){$("#zoiaAccountCreateSpinner").hide(),$(".zoiaAccountForm-form-button").show(),t.error?$zUI.modal.alert(t.error,{labels:{ok:lang.OK},stack:!0}):$zUI.modal.alert(lang["Unable to create new account"],{labels:{ok:lang.OK},stack:!0});for(var e in t.fields)$("#zoiaAccountForm_"+t.fields[e]).addClass("za-form-danger");t.fields&&t.fields.length&&$("#zoiaAccountForm_"+t.fields[0]).focus()}},save:{url:"/api/hosting/account/create",method:"POST"},items:{id:{type:"text",label:lang["Account&nbsp;ID"],css:"za-width-medium",autofocus:!0,validation:{mandatoryCreate:!0,mandatoryEdit:!0,length:{min:1,max:64},regexp:/^[A-Za-z0-9_\-]+$/,process:function(t){return t.trim()}},helpText:lang["Latin characters and numbers only (1-64 chars)"]},preset:{type:"select",label:lang["Plan (price per month)"],css:"za-width-large",autofocus:!1,values:presets,validation:{mandatoryCreate:!0}},password:{type:"passwordConfirm",label:lang.Password,helpText:lang["Minimal length: 8 characters, type twice to verify. Required: uppercase and lowercase characters, numbers and special characters"],validation:{mandatoryCreate:!0,mandatoryEdit:!1,length:{min:8,max:50},process:function(t){return t.trim()}}},months:{type:"select",label:lang.Months,css:"za-width-small",autofocus:!1,values:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},validation:{mandatoryCreate:!0}},calc:{type:"text",label:""},buttons:{type:"buttons",css:"za-modal-footer za-text-right",buttons:[{label:lang.Cancel,css:"za-button-default za-modal-close"},{name:"btnSave",label:lang.Create,css:"za-button-primary",type:"submit"}],html:'<div za-spinner style="float:right;display:none" id="zoiaAccountCreateSpinner"></div>'}},lang:formBuilderLang},accountExtendFormData={template:{fields:'<div class="za-modal-body">{fields}</div>',buttons:"{buttons}"},formDangerClass:"za-form-danger",html:formBuilderHTML,events:{onSaveValidate:function(t){return t.id=accountExtendID,$("#zoiaAccountExtendSpinner").show(),$(".zoiaAccountExtendForm-form-button").hide(),t},onSaveSuccess:function(t){if($("#zoiaAccountExtendSpinner").hide(),$(".zoiaAccountExtendForm-form-button").show(),t&&1===t.status){accountExtendDialog.hide(),$(".zoia-accounts-id").each(function(){$(this).html()===accountExtendID&&$(this).parent().find("td:eq(2)").html(t.days)}),$("#zoia_history_table>tbody").prepend("<tr><td>"+new Date(1e3*parseInt(t.timestamp,10)).toLocaleString()+'</td><td><span za-icon="minus-circle"></span>&nbsp;'+("left"===configModule.currencyPosition?configModule.currency[locale]:"")+t.sum+("right"===configModule.currencyPosition?"&nbsp;"+configModule.currency[locale]:"")+"</td></tr>");var e=parseFloat($(".zoia-balance").html())-Math.abs(parseFloat(t.sum));$(".zoia-balance").html(e),totalFunds=e,$zUI.modal.alert(lang["Prolongation was successful"],{labels:{ok:lang.OK},stack:!0})}else $zUI.modal.alert(lang["Unable to prolong account"],{labels:{ok:lang.OK},stack:!0})},onSaveError:function(t){$("#zoiaAccountExtendSpinner").hide(),$(".zoiaAccountExtendForm-form-button").show(),t.error?$zUI.modal.alert(t.error,{labels:{ok:lang.OK},stack:!0}):$zUI.modal.alert(lang["Unable to prolong account"],{labels:{ok:lang.OK},stack:!0});for(var e in t.fields)$("#zoiaAccountExtendForm_"+t.fields[e]).addClass("za-form-danger");t.fields&&t.fields.length&&$("#zoiaAccountExtendForm_"+t.fields[0]).focus()}},save:{url:"/api/hosting/account/extend",method:"POST"},items:{months:{type:"select",label:lang.Months,css:"za-width-small",autofocus:!1,values:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},validation:{mandatoryCreate:!0}},calc:{type:"text",label:""},buttons:{type:"buttons",css:"za-modal-footer za-text-right",buttons:[{label:lang.Cancel,css:"za-button-default za-modal-close"},{name:"btnSave",label:lang.Prolong,css:"za-button-primary",type:"submit"}],html:'<div za-spinner style="float:right;display:none" id="zoiaAccountExtendSpinner"></div>'}},lang:formBuilderLang},calculateCreateTotal=function(){var t=$("#zoiaAccountForm_preset").val(),e=$("#zoiaAccountForm_months").val(),a=prices[t]*e;a>totalFunds?($("#zoiaAccountForm_btnSave").prop("disabled",!0),$("#zoiaAccountCreateInsufficientFunds").show()):($("#zoiaAccountForm_btnSave").prop("disabled",!1),$("#zoiaAccountCreateInsufficientFunds").hide()),$(".zoia-create-account-total").html(("left"===configModule.currencyPosition?configModule.currency[locale]:"")+a+("right"===configModule.currencyPosition?"&nbsp;"+configModule.currency[locale]:""))},calculateExtendTotal=function(){var t=$("#zoiaAccountExtendForm_months").val(),e=accountExtendCost*t;e>totalFunds?($("#zoiaAccountExtendForm_btnSave").prop("disabled",!0),$("#zoiaAccountExtendInsufficientFunds").show()):($("#zoiaAccountExtendForm_btnSave").prop("disabled",!1),$("#zoiaAccountExtendInsufficientFunds").hide()),$(".zoia-extend-account-total").html(("left"===configModule.currencyPosition?configModule.currency[locale]:"")+e+("right"===configModule.currencyPosition?"&nbsp;"+configModule.currency[locale]:""))};$(document).ready(function(){accountCreateDialog=$zUI.modal("#createAccountDialog",{bgClose:!1,escClose:!1}),accountExtendDialog=$zUI.modal("#extendAccountDialog",{bgClose:!1,escClose:!1}),accountProgressDialog=$zUI.modal("#accountProgressDialog",{bgClose:!1,escClose:!1}),$("#zoia_btn_account_create").click(function(){$("#zoiaAccountForm").zoiaFormBuilder().resetForm(),calculateCreateTotal(),accountCreateDialog.show()}),$("#zoiaAccountForm").zoiaFormBuilder(accountCreateFormData),$("#zoiaAccountExtendForm").zoiaFormBuilder(accountExtendFormData),$("#zoiaAccountForm_calc").parent().parent().html('<div class="za-alert-warning" za-alert id="zoiaAccountCreateInsufficientFunds" style="margin-bottom:-5px"><p>'+lang["Insufficient funds"]+'</p></div><div class="za-card za-card-default za-card-small za-card-body" style="padding-top:25px;"><p class="za-text-large">'+lang.Total+':&nbsp;<span class="zoia-create-account-total"></span></div>'),$("#zoiaAccountForm_preset").change(calculateCreateTotal).keypress(calculateCreateTotal),$("#zoiaAccountForm_months").change(calculateCreateTotal).keypress(calculateCreateTotal),$("#zoiaAccountExtendForm_months").change(calculateExtendTotal).keypress(calculateExtendTotal),$("#zoiaAccountExtendForm_calc").parent().parent().html('<div class="za-alert-warning" za-alert id="zoiaAccountExtendInsufficientFunds" style="margin-bottom:-5px;display:none"><p>'+lang["Insufficient funds"]+'</p></div><div class="za-card za-card-default za-card-small za-card-body" style="padding-top:25px;"><p class="za-text-large">'+lang.Total+':&nbsp;<span class="zoia-extend-account-total"></span></div>'),transactionsLength&&$("#zoia_history_table>tbody>tr").each(function(){$(this).find("td:first").html(new Date(1e3*parseInt($(this).find("td:first").html(),10)).toLocaleString())}),$("#zoia_history_table").show(),$(".zoia-btn-extend").unbind().click(btnExtendClickHandler),$(".topup-captcha-img").click(function(){captchaRefresh()}),captchaRefresh(),$("#zoia_form_topup").submit(topupHandler),$(".zoia-loading").hide(),$(".zoia-wrap-everything").show()});